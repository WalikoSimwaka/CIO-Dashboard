<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>CIO DASHBOARD</title>

		<!-- Load React and Babel -->
		<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
		<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

		<!-- Load Font Awesome for icons -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

		<!-- Load Tailwind CSS -->
		<script src="https://cdn.tailwindcss.com"></script>
		<script>
			tailwind.config = {
				darkMode: "class",
			};
		</script>

		<!-- Inline CSS -->
		<style>
			html,
			body,
			#root {
				margin: 0;
				padding: 0;
				height: 100vh;
				width: 100vw;
				font-family: "Aptos", "Segoe UI", Roboto, "Helvetica Neue", Arial,
					sans-serif;
			}

			@font-face {
				font-family: "Aptos";
				font-style: normal;
				font-weight: 400;
				src: local("Aptos"), local("Aptos Normal");
			}

			@font-face {
				font-family: "Aptos";
				font-style: bold;
				font-weight: 700;
				src: local("Aptos Bold"), local("Aptos-Bold");
			}

			/* Dark mode styles */
			.dark {
				background-color: #03021e;
				color: white;
			}

			/* Light mode styles */
			.light {
				background-color: #efeff3;
				color: black;
			}

			/* Bullet point styles for tasks */
			.task-bullet {
				display: inline-block;
				width: 12px;
				height: 12px;
				border-radius: 50%;
				margin-right: 12px;
			}
			.bullet-high {
				background-color: #ef4444; /* red */
			}
			.bullet-medium {
				background-color: #f59e0b; /* yellow */
			}
			.bullet-low {
				background-color: #10b981; /* green */
			}
		</style>
	</head>
	<body class="light">
		<div id="root"></div>

		<!-- Main Application Script (JSX) -->
		<script type="text/babel" data-presets="react">
			// ========== Utility Functions ==========
			const formatDate = (dateString) => {
				if (!dateString) return "No date set";

				const date = new Date(dateString);
				const day = date.getDate();
				const month = date
					.toLocaleString("default", { month: "short" })
					.toLowerCase();
				const year = date.getFullYear().toString().slice(-2);

				return `${day} ${month} ${year}`;
			};

			const formatDateTime = (dateString) => {
				if (!dateString) return "No date set";

				const date = new Date(dateString);
				const day = date.getDate();
				const month = date
					.toLocaleString("default", { month: "short" })
					.toLowerCase();
				const year = date.getFullYear().toString().slice(-2);
				const hours = date.getHours().toString().padStart(2, "0");
				const minutes = date.getMinutes().toString().padStart(2, "0");

				return `${day} ${month} ${year} ${hours}:${minutes}`;
			};

			const getTimeElapsed = (timestamp) => {
				const now = new Date();
				const past = new Date(timestamp);
				const diff = Math.floor((now - past) / 1000);

				const hours = Math.floor(diff / 3600);
				const minutes = Math.floor((diff % 3600) / 60);
				const seconds = diff % 60;

				return `${String(hours).padStart(2, "0")}:${String(minutes).padStart(
					2,
					"0"
				)}:${String(seconds).padStart(2, "0")}`;
			};

			// ========== Theme Context ==========
			const ThemeContext = React.createContext();

			const ThemeProvider = ({ children }) => {
				const [darkMode, setDarkMode] = React.useState(false);

				const toggleDarkMode = () => {
					setDarkMode(!darkMode);
					document.body.classList.toggle("dark", !darkMode);
					document.body.classList.toggle("light", darkMode);
				};

				return (
					<ThemeContext.Provider value={{ darkMode, toggleDarkMode }}>
						{children}
					</ThemeContext.Provider>
				);
			};

			const useTheme = () => React.useContext(ThemeContext);

			// ========== Header Component ==========
			const Header = () => {
				const { darkMode, toggleDarkMode } = useTheme();

				return (
					<header
						className={`p-20 border-b ${
							darkMode
								? "bg-[#020217] text-white border-gray-800"
								: "bg-white text-black border-gray-300"
						}`}>
						<div className="w-full flex items-center justify-between">
							{/* Left: Title */}
							<div className="flex items-center space-x-12">
								<h1 className="text-6xl font-bold hidden sm:block uppercase px-12">
									CIO Dashboard
								</h1>
							</div>

							{/* Right: Dark Mode Toggle */}
							<div className="flex items-center justify-end pr-12">
								<label className="relative inline-flex items-center cursor-pointer scale-150">
									<input
										type="checkbox"
										className="sr-only peer"
										checked={darkMode}
										onChange={toggleDarkMode}
									/>
									<div className="w-16 h-8 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:bg-blue-600"></div>
									<span className="absolute left-1 top-1 bg-white rounded-full w-6 h-6 transition-all peer-checked:left-9"></span>
								</label>
								<span className="ml-4 text-6xl hidden sm:inline">
									Dark Mode
								</span>
							</div>
						</div>
					</header>
				);
			};

			// ========== Footer Component ==========
			const Footer = () => {
				const { darkMode } = useTheme();

				return (
					<footer
						className={`p-16 text-center border-t ${
							darkMode
								? "bg-[#020217] text-gray-300 border border-gray-800"
								: "bg-white text-black border-gray-300"
						}`}>
						<p className="text-6xl">
							&copy; {new Date().getFullYear()} Chief Information Officer
							Dashboard
						</p>
					</footer>
				);
			};

			// ========== PriorityTasks Component ==========
			const PriorityTasks = () => {
				const { darkMode } = useTheme();
				const [isModalOpen, setIsModalOpen] = React.useState(false);
				const [isEditModalOpen, setIsEditModalOpen] = React.useState(false);
				const [tasks, setTasks] = React.useState([]);
				const [loading, setLoading] = React.useState(true);
				const [error, setError] = React.useState(null);
				const [currentTask, setCurrentTask] = React.useState(null);
				const [newTask, setNewTask] = React.useState({
					title: "",
					priority: "medium",
					due_date: "",
					completed: false,
				});

				// Fetch tasks from API
				const fetchTasks = async () => {
					try {
						const response = await fetch(
							"http://cio-dashboard-backend-production.up.railway.app/api/priority-tasks"
						);
						if (!response.ok) throw new Error("Failed to fetch tasks");
						const data = await response.json();
						setTasks(data);
					} catch (err) {
						setError(err.message);
					} finally {
						setLoading(false);
					}
				};

				React.useEffect(() => {
					fetchTasks();
				}, []);

				const handleAddTask = async (e) => {
					e.preventDefault();
					try {
						const response = await fetch(
							"http://cio-dashboard-backend-production.up.railway.app/api/priority-tasks",
							{
								method: "POST",
								headers: {
									"Content-Type": "application/json",
								},
								body: JSON.stringify(newTask),
							}
						);

						if (!response.ok) throw new Error("Failed to add task");
						const addedTask = await response.json();
						setTasks((prev) => [...prev, addedTask]);
						setNewTask({
							title: "",
							priority: "medium",
							due_date: "",
							completed: false,
						});
						setIsModalOpen(false);
					} catch (err) {
						setError(err.message);
					}
				};

				const handleUpdateTask = async (e) => {
					e.preventDefault();
					try {
						const response = await fetch(
							`http://cio-dashboard-backend-production.up.railway.app/api/priority-tasks/${currentTask._id}`,
							{
								method: "PUT",
								headers: {
									"Content-Type": "application/json",
								},
								body: JSON.stringify(currentTask),
							}
						);

						if (!response.ok) throw new Error("Failed to update task");
						const updatedTask = await response.json();
						setTasks((prev) =>
							prev.map((task) =>
								task._id === updatedTask._id ? updatedTask : task
							)
						);
						setIsEditModalOpen(false);
					} catch (err) {
						setError(err.message);
					}
				};

				const handleRemoveTask = async (id) => {
					try {
						const response = await fetch(
							`http://cio-dashboard-backend-production.up.railway.app/api/priority-tasks/${id}`,
							{
								method: "DELETE",
							}
						);

						if (!response.ok) throw new Error("Failed to delete task");
						setTasks((prev) => prev.filter((task) => task._id !== id));
					} catch (err) {
						setError(err.message);
					}
				};

				const handleEditClick = (task) => {
					setCurrentTask(task);
					setIsEditModalOpen(true);
				};

				const handleInputChange = (e) => {
					const { name, value } = e.target;
					setNewTask((prev) => ({ ...prev, [name]: value }));
				};

				const handleEditInputChange = (e) => {
					const { name, value } = e.target;
					setCurrentTask((prev) => ({ ...prev, [name]: value }));
				};

				const toggleTaskCompletion = async (task) => {
					try {
						const updatedTask = { ...task, completed: !task.completed };
						const response = await fetch(
							`http://cio-dashboard-backend-production.up.railway.app/api/priority-tasks/${task._id}`,
							{
								method: "PUT",
								headers: {
									"Content-Type": "application/json",
								},
								body: JSON.stringify(updatedTask),
							}
						);

						if (!response.ok) throw new Error("Failed to update task");
						const data = await response.json();
						setTasks((prev) =>
							prev.map((t) => (t._id === data._id ? data : t))
						);
					} catch (err) {
						setError(err.message);
					}
				};

				const getBulletClass = (priority) => {
					switch (priority) {
						case "high":
							return "bullet-high";
						case "medium":
							return "bullet-medium";
						case "low":
							return "bullet-low";
						default:
							return "bullet-low";
					}
				};
				if (loading) return <div>Loading tasks...</div>;
				if (error) return <div>Error: {error}</div>;

				return (
					<>
						<style jsx>{`
							.priority-bullet {
								position: absolute;
								left: 5px;
								top: 50%;
								transform: translateY(-50%);
								width: 12px;
								height: 12px;
								border-radius: 50%;
								background-color: ${darkMode ? "#ffffff" : "#000000"};
							}
							.bullet-high {
								width: 40px;
								height: 40px;
							}
							.bullet-medium {
								width: 12px;
								height: 12px;
							}
							.bullet-low {
								width: 8px;
								height: 8px;
							}
							.task-item-container {
								position: relative;
								padding-left: 40px;
							}
						`}</style>

						<div
							className={`p-12 md:p-12 rounded-lg shadow h-full flex flex-col border ${
								darkMode
									? "bg-[#020217] text-gray-100 border-gray-800"
									: "bg-white text-gray-800 border-gray-300"
							}`}>
							<div className="flex justify-between items-center mb-2 md:mb-4">
								<h2 className="text-6xl md:text-6xl font-bold mb-16 uppercase">
									Priority Tasks
								</h2>
								<button
									onClick={() => setIsModalOpen(true)}
									className={`p-1 md:p-2 rounded-full ${
										darkMode
											? "bg-gray-700 hover:bg-gray-600"
											: "bg-gray-200 hover:bg-gray-300"
									}`}>
									<i className="fas fa-plus text-6xl md:text-6xl"></i>
								</button>
							</div>

							<div className="space-y-1 md:space-y-3 flex-1 overflow-y-auto">
								{tasks.map((task, index) => (
									<div
										key={task._id}
										className={`p-2 md:p-12 rounded-lg border ${
											darkMode
												? "bg-[#03021E] border-gray-800"
												: "bg-gray-50 border-gray-300"
										}`}>
										<div className="task-item-container">
											<div
												className={`priority-bullet ${getBulletClass(
													task.priority
												)}`}></div>
											<div className="flex items-start justify-between">
												<div className="flex-1 min-w-0 p-12">
													<p
														className={`text-6xl md:text-6xl font-medium ${
															task.completed
																? "line-through text-gray-400 dark:text-gray-500"
																: ""
														}`}>
														{task.title}
													</p>
												</div>
												<div className="flex items-center">
													<button
														onClick={() => handleRemoveTask(task._id)}
														className="text-gray-400 hover:text-red-500 dark:hover:text-red-400">
														<i className="fas fa-times text-6xl md:text-6xl"></i>
													</button>
												</div>
											</div>
										</div>
									</div>
								))}
							</div>
						</div>

						{isModalOpen && (
							<div
								className={`fixed inset-0 z-50 flex items-center justify-center p-12 ${
									darkMode ? "bg-black/70" : "bg-gray-500/70"
								}`}>
								<div
									className={`relative w-full max-w-md rounded-lg shadow-xl p-6 ${
										darkMode
											? "bg-[#020217] border border-gray-800"
											: "bg-white border border-gray-300"
									}`}>
									<button
										onClick={() => setIsModalOpen(false)}
										className={`absolute top-12 right-4 p-1 rounded-full ${
											darkMode ? "hover:bg-gray-800" : "hover:bg-gray-100"
										}`}>
										<i className="fas fa-times text-gray-500"></i>
									</button>

									<h3 className="text-6xl font-semibold mb-4">Add New Task</h3>

									<form onSubmit={handleAddTask} className="space-y-4">
										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Task Title*
											</label>
											<input
												type="text"
												name="title"
												value={newTask.title}
												onChange={handleInputChange}
												required
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div className="grid grid-cols-2 gap-12">
											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Priority*
												</label>
												<select
													name="priority"
													value={newTask.priority}
													onChange={handleInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}>
													<option value="high">High</option>
													<option value="medium">Medium</option>
													<option value="low">Low</option>
												</select>
											</div>

											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Due Date
												</label>
												<input
													type="datetime-local"
													name="due_date"
													value={newTask.due_date}
													onChange={handleInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>
										</div>

										<div className="flex justify-end space-x-3 pt-2">
											<button
												type="button"
												onClick={() => setIsModalOpen(false)}
												className={`px-4 py-2 rounded ${
													darkMode
														? "bg-gray-700 hover:bg-gray-600"
														: "bg-gray-200 hover:bg-gray-300"
												}`}>
												Cancel
											</button>
											<button
												type="submit"
												className="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
												Add Task
											</button>
										</div>
									</form>
								</div>
							</div>
						)}

						{isEditModalOpen && currentTask && (
							<div
								className={`fixed inset-0 z-50 flex items-center justify-center p-12 ${
									darkMode ? "bg-black/70" : "bg-gray-500/70"
								}`}>
								<div
									className={`relative w-full max-w-md rounded-lg shadow-xl p-6 ${
										darkMode
											? "bg-[#020217] border border-gray-800"
											: "bg-white border border-gray-300"
									}`}>
									<button
										onClick={() => setIsEditModalOpen(false)}
										className={`absolute top-12 right-4 p-1 rounded-full ${
											darkMode ? "hover:bg-gray-800" : "hover:bg-gray-100"
										}`}>
										<i className="fas fa-times text-gray-500"></i>
									</button>

									<h3 className="text-6xl font-semibold mb-4">Edit Task</h3>

									<form onSubmit={handleUpdateTask} className="space-y-4">
										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Task Title*
											</label>
											<input
												type="text"
												name="title"
												value={currentTask.title}
												onChange={handleEditInputChange}
												required
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div className="grid grid-cols-2 gap-12">
											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Priority*
												</label>
												<select
													name="priority"
													value={currentTask.priority}
													onChange={handleEditInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}>
													<option value="high">High</option>
													<option value="medium">Medium</option>
													<option value="low">Low</option>
												</select>
											</div>

											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Due Date
												</label>
												<input
													type="datetime-local"
													name="due_date"
													value={currentTask.due_date}
													onChange={handleEditInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>
										</div>

										<div className="flex items-center">
											<input
												type="checkbox"
												id="completed"
												name="completed"
												checked={currentTask.completed}
												onChange={(e) =>
													setCurrentTask({
														...currentTask,
														completed: e.target.checked,
													})
												}
												className="w-8 h-8 mr-4"
											/>
											<label
												htmlFor="completed"
												className={`text-6xl ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Completed
											</label>
										</div>

										<div className="flex justify-end space-x-3 pt-2">
											<button
												type="button"
												onClick={() => setIsEditModalOpen(false)}
												className={`px-4 py-2 rounded ${
													darkMode
														? "bg-gray-700 hover:bg-gray-600"
														: "bg-gray-200 hover:bg-gray-300"
												}`}>
												Cancel
											</button>
											<button
												type="submit"
												className="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
												Update Task
											</button>
										</div>
									</form>
								</div>
							</div>
						)}
					</>
				);
			};

			// ========== HighPriorityProjects Component ==========
			const HighPriorityProjects = () => {
				const { darkMode } = useTheme();
				const [isModalOpen, setIsModalOpen] = React.useState(false);
				const [isEditModalOpen, setIsEditModalOpen] = React.useState(false);
				const [projects, setProjects] = React.useState([]);
				const [loading, setLoading] = React.useState(true);
				const [error, setError] = React.useState(null);
				const [currentProject, setCurrentProject] = React.useState(null);
				const [newProject, setNewProject] = React.useState({
					name: "",
					start_date: "",
					due_date: "",
					status: "on track",
					responsible: "",
				});

				const fetchProjects = async () => {
					try {
						const response = await fetch(
							"http://cio-dashboard-backend-production.up.railway.app/api/high-priority-projects"
						);
						if (!response.ok) throw new Error("Failed to fetch projects");
						const data = await response.json();
						setProjects(data);
					} catch (err) {
						setError(err.message);
					} finally {
						setLoading(false);
					}
				};

				React.useEffect(() => {
					fetchProjects();
				}, []);

				const handleAddProject = async (e) => {
					e.preventDefault();
					try {
						const response = await fetch(
							"http://cio-dashboard-backend-production.up.railway.app/api/high-priority-projects",
							{
								method: "POST",
								headers: {
									"Content-Type": "application/json",
								},
								body: JSON.stringify(newProject),
							}
						);

						if (!response.ok) throw new Error("Failed to add project");
						const addedProject = await response.json();
						setProjects((prev) => [...prev, addedProject]);
						setNewProject({
							name: "",
							start_date: "",
							due_date: "",
							status: "on track",
							responsible: "",
						});
						setIsModalOpen(false);
					} catch (err) {
						setError(err.message);
					}
				};

				const handleUpdateProject = async (e) => {
					e.preventDefault();
					try {
						const response = await fetch(
							`http://cio-dashboard-backend-production.up.railway.app/api/high-priority-projects/${currentProject._id}`,
							{
								method: "PUT",
								headers: {
									"Content-Type": "application/json",
								},
								body: JSON.stringify(currentProject),
							}
						);

						if (!response.ok) throw new Error("Failed to update project");
						const updatedProject = await response.json();
						setProjects((prev) =>
							prev.map((project) =>
								project._id === updatedProject._id ? updatedProject : project
							)
						);
						setIsEditModalOpen(false);
					} catch (err) {
						setError(err.message);
					}
				};

				const handleRemoveProject = async (id) => {
					try {
						const response = await fetch(
							`http://cio-dashboard-backend-production.up.railway.app/api/high-priority-projects/${id}`,
							{
								method: "DELETE",
							}
						);

						if (!response.ok) throw new Error("Failed to delete project");
						setProjects((prev) => prev.filter((project) => project._id !== id));
					} catch (err) {
						setError(err.message);
					}
				};

				const handleEditClick = (project) => {
					setCurrentProject(project);
					setIsEditModalOpen(true);
				};

				const handleInputChange = (e) => {
					const { name, value } = e.target;
					setNewProject((prev) => ({ ...prev, [name]: value }));
				};

				const handleEditInputChange = (e) => {
					const { name, value } = e.target;
					setCurrentProject((prev) => ({ ...prev, [name]: value }));
				};

				const getStatusStyle = (status) => {
					switch (status) {
						case "overdue":
							return {
								bg: "bg-red-500 bg-opacity-10 dark:bg-red-500 dark:bg-opacity-30 border border-red-700",
								text: "text-red-800 dark:text-white",
								dot: "bg-red-500",
							};
						case "on track":
							return {
								bg: "bg-green-500 bg-opacity-20 dark:bg-green-500 dark:bg-opacity-30 border border-green-700",
								text: "text-green-800 dark:text-white",
								dot: "bg-green-500",
							};
						case "at risk":
							return {
								bg: "bg-yellow-500 bg-opacity-20 dark:bg-yellow-500 dark:bg-opacity-30 border border-yellow-700",
								text: "text-yellow-800 dark:text-white",
								dot: "bg-yellow-500",
							};
						default:
							return {
								bg: "bg-gray-500 bg-opacity-20 dark:bg-gray-500 dark:bg-opacity-30 border border-gray-700",
								text: "text-gray-800 dark:text-white",
								dot: "bg-gray-500",
							};
					}
				};

				if (loading) return <div>Loading projects...</div>;
				if (error) return <div>Error: {error}</div>;

				return (
					<>
						<div
							className={`p-12 md:p-12 rounded-lg shadow h-full flex flex-col border ${
								darkMode
									? "bg-[#020217] text-gray-100 border-gray-800"
									: "bg-white text-gray-800 border-gray-300"
							}`}>
							<div className="flex justify-between items-center mb-2 md:mb-4">
								<h2 className="text-6xl md:text-6xl font-bold mb-16 uppercase">
									High Priority Projects
								</h2>
								<button
									onClick={() => setIsModalOpen(true)}
									className={`p-1 md:p-2 rounded-full ${
										darkMode
											? "bg-gray-700 hover:bg-gray-600"
											: "bg-gray-200 hover:bg-gray-300"
									}`}>
									<i className="fas fa-plus text-6xl md:text-6xl"></i>
								</button>
							</div>

							<div className="flex-1 overflow-auto">
								<table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
									<thead>
										<tr>
											<th className="px-2 py-1 md:px-4 md:py-3 text-left text-6xl font-medium text-gray-500 uppercase tracking-wider border-b dark:border-gray-700 border-gray-300 truncate">
												Project
											</th>
											<th className="px-2 py-1 md:px-4 md:py-3 text-left text-6xl font-medium text-gray-500 uppercase tracking-wider border-b dark:border-gray-700 border-gray-300 truncate">
												Start Date
											</th>
											<th className="px-2 py-1 md:px-4 md:py-3 text-left text-6xl font-medium text-gray-500 uppercase tracking-wider border-b dark:border-gray-700 border-gray-300 truncate">
												Due Date
											</th>
											<th className="px-2 py-1 md:px-4 md:py-3 text-left text-6xl font-medium text-gray-500 uppercase tracking-wider border-b dark:border-gray-700 border-gray-300 truncate">
												Status
											</th>
											<th className="px-2 py-1 md:px-4 md:py-3 text-left text-6xl font-medium text-gray-500 uppercase tracking-wider border-b dark:border-gray-700 border-gray-300 truncate">
												Responsible
											</th>
											<th className="px-2 py-1 md:px-4 md:py-3 text-left text-6xl font-medium text-gray-500 uppercase tracking-wider border-b dark:border-gray-700 border-gray-300 truncate">
												Actions
											</th>
										</tr>
									</thead>
									<tbody className="divide-y divide-gray-200 dark:divide-gray-700">
										{projects.map((project) => {
											const statusStyle = getStatusStyle(project.status);
											return (
												<tr
													key={project._id}
													className="hover:bg-gray-50 dark:hover:bg-gray-20">
													<td className="px-2 py-12 md:px-4 md:py-12 whitespace-nowrap text-6xl md:text-6xl font-medium truncate">
														{project.name}
													</td>
													<td className="px-2 py-12 md:px-4 md:py-12 whitespace-nowrap text-6xl md:text-6xl text-gray-500 dark:text-gray-400 truncate">
														{formatDate(project.start_date)}
													</td>
													<td className="px-2 py-12 md:px-4 md:py-12 whitespace-nowrap text-6xl md:text-6xl truncate">
														{formatDate(project.due_date)}
													</td>
													<td className="px-2 py-12 md:px-4 md:py-12 whitespace-nowrap">
														<div className="flex items-center">
															<span
																className={`flex items-center px-12 py-8 text-6xl font-normal rounded-full ${statusStyle.bg} ${statusStyle.text}`}>
																<div
																	className={`w-8 h-8 rounded-full mr-4 ${statusStyle.dot}`}></div>
																<span className="truncate">
																	{project.status}
																</span>
															</span>
														</div>
													</td>
													<td className="px-2 py-12 md:px-4 md:py-12 whitespace-nowrap text-6xl md:text-6xl truncate">
														{project.responsible}
													</td>
													<td className="px-2 py-1 md:px-4 md:py-3 whitespace-nowrap text-6xl md:text-6xl truncate">
														<div className="flex space-x-4">
															<button
																onClick={() => handleRemoveProject(project._id)}
																className="text-gray-400 hover:text-red-500 dark:hover:text-red-400">
																<i className="fas fa-times"></i>
															</button>
														</div>
													</td>
												</tr>
											);
										})}
									</tbody>
								</table>
							</div>
						</div>

						{isModalOpen && (
							<div
								className={`fixed inset-0 z-50 flex items-center justify-center p-12 ${
									darkMode ? "bg-black/70" : "bg-gray-500/70"
								}`}>
								<div
									className={`relative w-full max-w-md rounded-lg shadow-xl p-6 ${
										darkMode
											? "bg-[#020217] border border-gray-800"
											: "bg-white border border-gray-300"
									}`}>
									<button
										onClick={() => setIsModalOpen(false)}
										className={`absolute top-12 right-4 p-1 rounded-full ${
											darkMode ? "hover:bg-gray-800" : "hover:bg-gray-100"
										}`}>
										<i className="fas fa-times text-gray-500"></i>
									</button>

									<h3 className="text-6xl font-semibold mb-4">
										Add New Project
									</h3>

									<form onSubmit={handleAddProject} className="space-y-4">
										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Project Name*
											</label>
											<input
												type="text"
												name="name"
												value={newProject.name}
												onChange={handleInputChange}
												required
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div className="grid grid-cols-2 gap-12">
											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Start Date*
												</label>
												<input
													type="date"
													name="start_date"
													value={newProject.start_date}
													onChange={handleInputChange}
													required
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>

											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Due Date*
												</label>
												<input
													type="date"
													name="due_date"
													value={newProject.due_date}
													onChange={handleInputChange}
													required
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>
										</div>

										<div className="grid grid-cols-2 gap-12">
											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Status*
												</label>
												<select
													name="status"
													value={newProject.status}
													onChange={handleInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}>
													<option value="on track">On Track</option>
													<option value="at risk">At Risk</option>
													<option value="overdue">Overdue</option>
												</select>
											</div>

											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Responsible*
												</label>
												<input
													type="text"
													name="responsible"
													value={newProject.responsible}
													onChange={handleInputChange}
													required
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>
										</div>

										<div className="flex justify-end space-x-3 pt-2">
											<button
												type="button"
												onClick={() => setIsModalOpen(false)}
												className={`px-4 py-2 rounded ${
													darkMode
														? "bg-gray-700 hover:bg-gray-600"
														: "bg-gray-200 hover:bg-gray-300"
												}`}>
												Cancel
											</button>
											<button
												type="submit"
												className="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
												Add Project
											</button>
										</div>
									</form>
								</div>
							</div>
						)}

						{isEditModalOpen && currentProject && (
							<div
								className={`fixed inset-0 z-50 flex items-center justify-center p-12 ${
									darkMode ? "bg-black/70" : "bg-gray-500/70"
								}`}>
								<div
									className={`relative w-full max-w-md rounded-lg shadow-xl p-6 ${
										darkMode
											? "bg-[#020217] border border-gray-800"
											: "bg-white border border-gray-300"
									}`}>
									<button
										onClick={() => setIsEditModalOpen(false)}
										className={`absolute top-12 right-4 p-1 rounded-full ${
											darkMode ? "hover:bg-gray-800" : "hover:bg-gray-100"
										}`}>
										<i className="fas fa-times text-gray-500"></i>
									</button>

									<h3 className="text-6xl font-semibold mb-4">Edit Project</h3>

									<form onSubmit={handleUpdateProject} className="space-y-4">
										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Project Name*
											</label>
											<input
												type="text"
												name="name"
												value={currentProject.name}
												onChange={handleEditInputChange}
												required
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div className="grid grid-cols-2 gap-12">
											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Start Date*
												</label>
												<input
													type="date"
													name="start_date"
													value={currentProject.start_date}
													onChange={handleEditInputChange}
													required
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>

											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Due Date*
												</label>
												<input
													type="date"
													name="due_date"
													value={currentProject.due_date}
													onChange={handleEditInputChange}
													required
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>
										</div>

										<div className="grid grid-cols-2 gap-12">
											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Status*
												</label>
												<select
													name="status"
													value={currentProject.status}
													onChange={handleEditInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}>
													<option value="on track">On Track</option>
													<option value="at risk">At Risk</option>
													<option value="overdue">Overdue</option>
												</select>
											</div>

											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Responsible*
												</label>
												<input
													type="text"
													name="responsible"
													value={currentProject.responsible}
													onChange={handleEditInputChange}
													required
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>
										</div>

										<div className="flex justify-end space-x-3 pt-2">
											<button
												type="button"
												onClick={() => setIsEditModalOpen(false)}
												className={`px-4 py-2 rounded ${
													darkMode
														? "bg-gray-700 hover:bg-gray-600"
														: "bg-gray-200 hover:bg-gray-300"
												}`}>
												Cancel
											</button>
											<button
												type="submit"
												className="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
												Update Project
											</button>
										</div>
									</form>
								</div>
							</div>
						)}
					</>
				);
			};

			// ========== WarRoom Component ==========
			const WarRoom = () => {
				const { darkMode } = useTheme();
				const [isModalOpen, setIsModalOpen] = React.useState(false);
				const [isEditModalOpen, setIsEditModalOpen] = React.useState(false);
				const [incidents, setIncidents] = React.useState([]);
				const [loading, setLoading] = React.useState(true);
				const [error, setError] = React.useState(null);
				const [currentIncident, setCurrentIncident] = React.useState(null);
				const [newIncident, setNewIncident] = React.useState({
					title: "",
					description: "",
					priority: "Critical",
					assignees: "",
					due_date: "",
				});
				const [elapsedTimes, setElapsedTimes] = React.useState({});

				const getPriorityColor = (priority) => {
					switch (priority) {
						case "Critical":
							return "bg-red-500 bg-opacity-10 text-red-700 dark:bg-red-500 dark:bg-opacity-30 border border-red-700";
						case "Moderate":
							return "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";
						case "Low":
							return "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";
						default:
							return "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";
					}
				};

				const fetchIncidents = async () => {
					try {
						const response = await fetch(
							"http://cio-dashboard-backend-production.up.railway.app/api/war-room"
						);
						if (!response.ok) throw new Error("Failed to fetch incidents");
						const data = await response.json();
						setIncidents(data);

						// Initialize elapsed times
						const initialTimes = {};
						data.forEach((incident) => {
							initialTimes[incident._id] = calculateElapsedTime(
								incident.timestamp
							);
						});
						setElapsedTimes(initialTimes);
					} catch (err) {
						setError(err.message);
					} finally {
						setLoading(false);
					}
				};

				React.useEffect(() => {
					fetchIncidents();
				}, []);

				React.useEffect(() => {
					fetchIncidents();
				}, []);
				const calculateElapsedTime = (timestamp) => {
					const now = new Date();
					const past = new Date(timestamp);
					const diff = Math.floor((now - past) / 1000);

					const hours = Math.floor(diff / 3600);
					const minutes = Math.floor((diff % 3600) / 60);
					const seconds = diff % 60;

					return `${String(hours).padStart(2, "0")}:${String(minutes).padStart(
						2,
						"0"
					)}:${String(seconds).padStart(2, "0")}`;
				};

				React.useEffect(() => {
					const timer = setInterval(() => {
						const updatedTimes = {};
						incidents.forEach((incident) => {
							updatedTimes[incident._id] = calculateElapsedTime(
								incident.timestamp
							);
						});
						setElapsedTimes(updatedTimes);
					}, 1000);

					return () => clearInterval(timer);
				}, [incidents]);
				const handleInputChange = (e) => {
					const { name, value } = e.target;
					setNewIncident((prev) => ({ ...prev, [name]: value }));
				};

				const handleEditInputChange = (e) => {
					const { name, value } = e.target;
					setCurrentIncident((prev) => ({ ...prev, [name]: value }));
				};

				const handleSubmit = async (e) => {
					e.preventDefault();
					try {
						const response = await fetch(
							"http://cio-dashboard-backend-production.up.railway.app/api/war-room",
							{
								method: "POST",
								headers: {
									"Content-Type": "application/json",
								},
								body: JSON.stringify({
									...newIncident,
									status: "New",
									assignees: newIncident.assignees
										? [newIncident.assignees]
										: ["Unassigned"],
								}),
							}
						);

						if (!response.ok) throw new Error("Failed to add incident");
						const addedIncident = await response.json();
						setIncidents((prev) => [...prev, addedIncident]);
						setNewIncident({
							title: "",
							description: "",
							priority: "Critical",
							assignees: "",
							due_date: "",
						});
						setIsModalOpen(false);
					} catch (err) {
						setError(err.message);
					}
				};

				const handleUpdateIncident = async (e) => {
					e.preventDefault();
					try {
						const response = await fetch(
							`http://cio-dashboard-backend-production.up.railway.app/api/war-room/${currentIncident._id}`,
							{
								method: "PUT",
								headers: {
									"Content-Type": "application/json",
								},
								body: JSON.stringify(currentIncident),
							}
						);

						if (!response.ok) throw new Error("Failed to update incident");
						const updatedIncident = await response.json();
						setIncidents((prev) =>
							prev.map((incident) =>
								incident._id === updatedIncident._id
									? updatedIncident
									: incident
							)
						);
						setIsEditModalOpen(false);
					} catch (err) {
						setError(err.message);
					}
				};

				const handleRemoveIncident = async (id) => {
					try {
						const response = await fetch(
							`http://cio-dashboard-backend-production.up.railway.app/api/war-room/${id}`,
							{
								method: "DELETE",
							}
						);

						if (!response.ok) throw new Error("Failed to delete incident");
						setIncidents((prev) =>
							prev.filter((incident) => incident._id !== id)
						);
					} catch (err) {
						setError(err.message);
					}
				};

				const handleEditClick = (incident) => {
					setCurrentIncident(incident);
					setIsEditModalOpen(true);
				};

				if (loading) return <div>Loading incidents...</div>;
				if (error) return <div>Error: {error}</div>;
				return (
					<div
						className={`p-12 md:p-12 rounded shadow h-full flex flex-col border ${
							darkMode
								? "bg-[#020217] text-white border-gray-800"
								: "bg-white text-black border-gray-300"
						}`}>
						<div className="flex justify-between items-center mb-2 md:mb-4">
							<h2 className="text-6xl md:text-6xl font-bold mb-16 uppercase">
								War Room
							</h2>

							<button
								onClick={() => setIsModalOpen(true)}
								className={`p-1 md:p-2 rounded-full ${
									darkMode
										? "bg-gray-700 hover:bg-gray-600"
										: "bg-gray-200 hover:bg-gray-300"
								}`}>
								<i className="fas fa-plus text-6xl md:text-6xl"></i>
							</button>
						</div>

						<div className="space-y-4 overflow-y-auto flex-1">
							{incidents.map((incident) => (
								<div
									key={incident._id}
									className={`p-8 rounded-lg border bg-red-300${
										darkMode
											? "bg-[#03021E] bg-red-300 border-gray-800"
											: "bg-gray-50 border-gray-300"
									}`}>
									<div className="flex justify-between items-start mb-12 ">
										<div className="flex flex-col">
											<span className="text-6xl text-gray-500 dark:text-gray-400">
												{formatDate(incident.due_date)}
											</span>
										</div>

										<div className="flex space-x-4">
											<button
												onClick={() => handleRemoveIncident(incident._id)}
												className="text-gray-400 hover:text-red-500 dark:hover:text-red-400">
												<i className="fas fa-times text-6xl"></i>
											</button>
										</div>
									</div>

									<div className="mb-16">
										<h3 className="font-bold text-6xl text-gray-800 dark:text-white mb-12">
											{incident.title}
										</h3>
										<p className="text-6xl text-gray-700 dark:text-gray-300">
											{incident.description}
										</p>
									</div>

									<div className="flex justify-between items-center">
										<div className="flex items-center">
											<span className="text-6xl text-gray-800 dark:text-gray-200 mr-12">
												Assignees:
											</span>
											<span className="text-6xl font-medium">
												{incident.assignees.join(", ")}
											</span>
										</div>

										<span className="text-6xl text-gray-500 dark:text-gray-400">
											Time elapsed: {elapsedTimes[incident._id] || "00:00:00"}
										</span>
									</div>
								</div>
							))}
						</div>

						{isModalOpen && (
							<div
								className={`fixed inset-0 z-50 flex items-center justify-center p-12 ${
									darkMode ? "bg-black/70" : "bg-gray-500/70"
								}`}>
								<div
									className={`relative w-full max-w-md rounded-lg shadow-xl p-6 ${
										darkMode
											? "bg-[#020217] border border-gray-800"
											: "bg-white border border-gray-300"
									}`}>
									<button
										onClick={() => setIsModalOpen(false)}
										className={`absolute top-12 right-4 p-1 rounded-full ${
											darkMode ? "hover:bg-gray-800" : "hover:bg-gray-100"
										}`}>
										<i className="fas fa-times text-gray-500"></i>
									</button>

									<h3 className="text-6xl font-semibold mb-4">
										Log New Incident
									</h3>

									<form onSubmit={handleSubmit} className="space-y-4">
										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Incident Title*
											</label>
											<input
												type="text"
												name="title"
												value={newIncident.title}
												onChange={handleInputChange}
												required
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Description*
											</label>
											<textarea
												name="description"
												value={newIncident.description}
												onChange={handleInputChange}
												required
												rows={3}
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div className="grid grid-cols-2 gap-12">
											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Priority*
												</label>
												<select
													name="priority"
													value={newIncident.priority}
													onChange={handleInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}>
													<option value="Critical">Critical</option>
													<option value="Moderate">Moderate</option>
													<option value="Low">Low</option>
												</select>
											</div>

											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Due Date
												</label>
												<input
													type="datetime-local"
													name="due_date"
													value={newIncident.due_date}
													onChange={handleInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>
										</div>

										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Assigned To
											</label>
											<input
												type="text"
												name="assignees"
												value={newIncident.assignees}
												onChange={handleInputChange}
												placeholder="Enter assignee name"
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div className="flex justify-end space-x-3 pt-2">
											<button
												type="button"
												onClick={() => setIsModalOpen(false)}
												className={`px-4 py-2 rounded ${
													darkMode
														? "bg-gray-700 hover:bg-gray-600"
														: "bg-gray-200 hover:bg-gray-300"
												}`}>
												Cancel
											</button>
											<button
												type="submit"
												className="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
												Log Incident
											</button>
										</div>
									</form>
								</div>
							</div>
						)}

						{isEditModalOpen && currentIncident && (
							<div
								className={`fixed inset-0 z-50 flex items-center justify-center p-12 ${
									darkMode ? "bg-black/70" : "bg-gray-500/70"
								}`}>
								<div
									className={`relative w-full max-w-md rounded-lg shadow-xl p-6 ${
										darkMode
											? "bg-[#020217] border border-gray-800"
											: "bg-white border border-gray-300"
									}`}>
									<button
										onClick={() => setIsEditModalOpen(false)}
										className={`absolute top-12 right-4 p-1 rounded-full ${
											darkMode ? "hover:bg-gray-800" : "hover:bg-gray-100"
										}`}>
										<i className="fas fa-times text-gray-500"></i>
									</button>

									<h3 className="text-6xl font-semibold mb-4">Edit Incident</h3>

									<form onSubmit={handleUpdateIncident} className="space-y-4">
										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Incident Title*
											</label>
											<input
												type="text"
												name="title"
												value={currentIncident.title}
												onChange={handleEditInputChange}
												required
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Description*
											</label>
											<textarea
												name="description"
												value={currentIncident.description}
												onChange={handleEditInputChange}
												required
												rows={3}
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div className="grid grid-cols-2 gap-12">
											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Priority*
												</label>
												<select
													name="priority"
													value={currentIncident.priority}
													onChange={handleEditInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}>
													<option value="Critical">Critical</option>
													<option value="Moderate">Moderate</option>
													<option value="Low">Low</option>
												</select>
											</div>

											<div>
												<label
													className={`block text-6xl mb-1 ${
														darkMode ? "text-gray-300" : "text-gray-700"
													}`}>
													Due Date
												</label>
												<input
													type="datetime-local"
													name="due_date"
													value={currentIncident.due_date}
													onChange={handleEditInputChange}
													className={`w-full px-3 py-2 rounded border ${
														darkMode
															? "bg-[#03021E] border-gray-700 focus:border-blue-500"
															: "bg-white border-gray-300 focus:border-blue-500"
													} focus:outline-none focus:ring-1 focus:ring-blue-500`}
												/>
											</div>
										</div>

										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Status
											</label>
											<select
												name="status"
												value={currentIncident.status}
												onChange={handleEditInputChange}
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}>
												<option value="New">New</option>
												<option value="In Progress">In Progress</option>
												<option value="Resolved">Resolved</option>
											</select>
										</div>

										<div>
											<label
												className={`block text-6xl mb-1 ${
													darkMode ? "text-gray-300" : "text-gray-700"
												}`}>
												Assignees
											</label>
											<input
												type="text"
												name="assignees"
												value={currentIncident.assignees.join(", ")}
												onChange={(e) =>
													setCurrentIncident({
														...currentIncident,
														assignees: e.target.value.split(","),
													})
												}
												placeholder="Enter comma-separated names"
												className={`w-full px-3 py-2 rounded border ${
													darkMode
														? "bg-[#03021E] border-gray-700 focus:border-blue-500"
														: "bg-white border-gray-300 focus:border-blue-500"
												} focus:outline-none focus:ring-1 focus:ring-blue-500`}
											/>
										</div>

										<div className="flex justify-end space-x-3 pt-2">
											<button
												type="button"
												onClick={() => setIsEditModalOpen(false)}
												className={`px-4 py-2 rounded ${
													darkMode
														? "bg-gray-700 hover:bg-gray-600"
														: "bg-gray-200 hover:bg-gray-300"
												}`}>
												Cancel
											</button>
											<button
												type="submit"
												className="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
												Update Incident
											</button>
										</div>
									</form>
								</div>
							</div>
						)}
					</div>
				);
			};

			// ========== HomePage Component ==========
			const HomePage = () => {
				const { darkMode } = useTheme();

				return (
					<main
						className={`h-full w-full p-2 md:p-12 ${
							darkMode ? "bg-[#03021E] text-white" : "bg-[#EFEFF3] text-black"
						}`}>
						<div className="grid grid-cols-1 lg:grid-cols-2 gap-2 md:gap-12 h-full">
							<div className="lg:col-span-1 h-full min-h-0">
								<PriorityTasks />
							</div>
							<div className="lg:col-span-1 h-full min-h-0">
								<WarRoom />
							</div>
							<div className="lg:col-span-2 h-full min-h-0">
								<HighPriorityProjects />
							</div>
						</div>
					</main>
				);
			};

			// ========== App Component ==========
			const App = () => {
				return (
					<ThemeProvider>
						<div className="flex flex-col h-screen">
							<Header />
							<div className="flex-1 w-full overflow-hidden">
								<HomePage />
							</div>
							<Footer />
						</div>
					</ThemeProvider>
				);
			};

			// ========== Render the App ==========
			const root = ReactDOM.createRoot(document.getElementById("root"));
			root.render(
				<React.StrictMode>
					<App />
				</React.StrictMode>
			);
		</script>
	</body>
</html>
